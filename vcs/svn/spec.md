# SVN使用规范-协同开发中SVN的使用规范

- **先更新，再提交**

    SVN更新的原则是要随时更新，随时提交。

    当完成了一个小功能，能够通过编译并且自己测试之后，谨慎地提交。

    如果在修改的期间别人也更改了svn的对应文件，那么commit就可能会失败。

    如果别人和自己更改的是同一个文件，那么update时会自动进行合并。

    如果修改的是同一行，那么合并时会产生冲突，这种情况就需要同之前的开发人员联系，两个人一起协商解决冲突，解决冲突之后，需要两人一起测试保证解决冲突之后，程序不会影响其他功能。

    在更新时注意所更新文件的列表，如果提交过程中产生了更新，则也是需要重新编译并且完成自己的一些必要测试，再进行提交。

    这样既能了解别人修改了哪些文件，同时也能避免SVN合并错误导致代码有错。

- **保持原子性的提交**

    每次提交的间歇尽可能地短，以几个小时的开发工作为宜。例如在更改UI界面的时候，可以每完成一个UI界面的修改或者设计，就提交一次。

    在开发功能模块的时候，可以每完成一个小细节功能的测试，就提交一次，在修改bug的时候，每修改掉一个bug并且确认修改了这个bug，也就提交一次。我们提倡多提交，也就能多为代码添加上保险。

- **多提交**

    每次提交的间歇尽可能地短，以几个小时的开发工作为宜。例如在更改UI界面的时候，可以每完成一个UI界面的修改或者设计，就提交一次。

    在开发功能模块的时候，可以每完成一个小细节功能的测试，就提交一次，在修改bug的时候，每修改掉一个bug并且确认修改了这个bug，也就提交一次。

    我们提倡多提交，也就能多为代码添加上保险。

- **不要提交不能通过编译的代码**

    代码在提交之前，首先要确认自己能够在本地编译。

    如果在代码中使用了第三方类库，要考虑到项目组成员中有些成员可能没有安装相应的第三方类库。

    项目经理在准备项目工作区域的时候，需要考虑到这样的情况，确保开发小组成员在签出代码之后能够在统一的环境中进行编译。

- **每次提交必须书写明晰的标注**

    在一个项目组中使用SVN，如果提交空的标注或者不确切的标注将会让项目组中其他的成员感到很无奈，项目经理无法很清晰的掌握工作进度，无法清晰的把握此次提交的概要信息。

    在发现错误后也无法准确的定位引起错误的文件。所以，在提交工作时，要填写明晰的标注，能够概要的描述所提交文件的信息，让项目组其他成员在看到标注后不用详细看代码就能了解你所做的修改。

- **提交时注意不要提交本地自动生成的文件**

    例如eclipse中的.classpath文件，Windows生成的缩略图Thumbs.db，项目编译生成的临时文件.obj, .class等等。

    如果项目中没有进行这方面的配置来强行禁止提交这样的文件，请自觉不要提交这样的文件。

    提交了这样的文件后，别人在更新后就可能与本地的环境冲突从而影响大家的工作。

- **不要提交自己不明白的代码**

    代码在提交入SVN之后，你的代码将被项目成员所分享。

    如果提交了你不明白的代码，你看不懂，别人也看不懂，如果在以后出现了问题将会成为项目质量的隐患。

    因此在引入任何第三方代码之前，确保你对这个代码有一个很清晰的了解。

- **慎用锁定功能**

    在项目中要慎用锁定的功能，在你锁定了一个文件之后别人就无法继续修改提交该文件，虽然可以减少冲突的发生率，但是可能会影响项目组中其他人员的工作。

    平时只有在编辑那些无法合并的文件（例如图片文件，flash文件等）时，才适当的采用锁定操作。

- **一般情况下，提交 GIT 时的注释可以分成几类，可以用几个动词开始：**
    - Added ( 新加入的需求 )
    - Fixed ( 修复 bug )
    - Changed ( 完成的任务 )
    - Updated ( 完成的任务，或者由于第三方模块变化而做的变化 )
    - 尽量将注释缩减为一句话，不要包含详细的内容。
    - 假如有 Issues 系统，其中可以包含 Issue 的 ID。比如：Issue #123456 包含作者的信息。比如 by Bruce

## SVN的标准目录结构：trunk、branches、tags

我们在一些著名开源项目的版本库中，通常可以看到trunk, branches,tags等三个目录。
由于SVN固有的特点，目录在SVN中并没有特别的意义，但是这三个目录却在大多数开源项目中存在，这是因为这三个目录反映了软件开发的通常模式。
trunk是主分支，是日常开发进行的地方。
branches是分支。一些阶段性的release版本，这些版本是可以继续进行开发和维护的，则放在branches目录中。又比如为不同用户客制化的版本，也可以放在分支中进行开发。
tags目录一般是只读的，这里存储阶段性的发布版本，只是作为一个里程碑的版本进行存档。
比如一个项目有main.cpp, common.h两个文件，假设目前在开发的是最新的3.0版本，而且1.0/2.0版本也在进行维护，那么项目树将类似如下样子：

    project
      |
      +-- trunk
      +     |
      +     +----- main.cpp  (3.0版本的最新文件）
      +     +----- common.h
      +
      +-- branches
      +     |
      +     +-- r1.0
      +     +     |
      +     +     +---- main.cpp （1.x版本的最新文件）
      +     +     +---- common.h
      +     +
      +     +-- r2.0
      +           |
      +           +---- main.cpp （2.x版本的最新文件）
      +           +---- common.h
      +
      +-- tags   (此目录只读)
            |
            +-- r1.0
            +     |
            +     +---- main.cpp （1.0版本的发布文件）
            +     +---- common.h
            +
            +-- r1.1
            +     |
            +     +---- main.cpp （1.1版本的发布文件）
            +     +---- common.h
            +
            +-- r1.2
            +     |
            +     +---- main.cpp （1.2版本的发布文件）
            +     +---- common.h
            +
            +-- r1.3
            +     |
            +     +---- main.cpp （1.3版本的发布文件）
            +     +---- common.h
            +
            +-- r2.0
            +     |
            +     +---- main.cpp （2.0版本的发布文件）
            +     +---- common.h
            +
            +-- r2.1
                  |
                  +---- main.cpp （2.1版本的发布文件）
                  +---- common.h
